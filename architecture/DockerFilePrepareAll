FROM alpine:latest
# Create the needed temp file before the first postgreSQL execution

RUN mkdir keycloak
RUN mkdir redis
RUN mkdir esdata
RUN mkdir postgres

RUN chown -R 1000:1000 ./redis/
RUN chown -R 1000:1000 ./keycloak
RUN chown -R 1000:1000 ./esdata

# Create group and user
# RUN groupadd non-root-postgres-group
# RUN useradd non-root-postgres-user --group non-root-postgres-group

# Set user rights to allow the on-root-postgres-user 
# to access the temp folder

# RUN chown -R non-root-postgres-user:non-root-postgres-group /postgres
# RUN chmod 777 /postgres

# Change to non-root privilege
# USER non-root-postgres
CMD [ "pwd" ]